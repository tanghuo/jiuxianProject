<?php if (!defined('THINK_PATH')) exit(); session_start(); try{ $user="root"; $pass="123456789"; $PDO=new PDO("mysql:host=localhost;dbname=jiuxian",$user,$pass); $PDO->setAttribute(PDO::ATTR_ERRMODE,PDO::ERRMODE_EXCEPTION ); $PDO->beginTransaction(); $query="insert user_cart(item_id,user_id,item_quantity) values(?,?,?)"; $PDO2 = $PDO -> prepare($query); $PDO2 ->bindParam(1,$item_id); $PDO2 ->bindParam(2,$user_id); $PDO2 ->bindParam(3,$item_quantity); $item_id=$_POST["id"]; $user_id=$_SESSION["user_id"]; $item_quantity=$_POST["buy_quantity"]; $PDO2 -> execute(); var_dump($_POST); echo($_SESSION); var_dump($_SESSION); echo "<script>"; echo "</script>"; $PDO->commit(); } catch(PDOException $e) { echo 'Connection failed: ' . $e->getMessage(); } ?>